
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <title>Custom Types · An Introduction to Elm</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 3.7.1">
        <meta name="author" content="Evan Czaplicki">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="pattern_matching.html" />
    
    
    <link rel="prev" href="type_aliases.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../bases_du_langage.html">
            
                <a href="../bases_du_langage.html">
            
                    
                    Bases du langage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../architecture/">
            
                <a href="../architecture/">
            
                    
                    L'Architecture Elm
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../architecture/buttons.html">
            
                <a href="../architecture/buttons.html">
            
                    
                    Buttons
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../architecture/text_fields.html">
            
                <a href="../architecture/text_fields.html">
            
                    
                    Text Fields
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../architecture/forms.html">
            
                <a href="../architecture/forms.html">
            
                    
                    Forms
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="./">
            
                <a href="./">
            
                    
                    Les types
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="reading_types.html">
            
                <a href="reading_types.html">
            
                    
                    Lire les types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="type_aliases.html">
            
                <a href="type_aliases.html">
            
                    
                    Type Aliases
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.4.3" data-path="custom_types.html">
            
                <a href="custom_types.html">
            
                    
                    Custom Types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="pattern_matching.html">
            
                <a href="pattern_matching.html">
            
                    
                    Pattern Matching
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../error_handling/">
            
                <a href="../error_handling/">
            
                    
                    Gestion d'erreur
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../error_handling/maybe.html">
            
                <a href="../error_handling/maybe.html">
            
                    
                    Maybe
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../error_handling/result.html">
            
                <a href="../error_handling/result.html">
            
                    
                    Result
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../effects/">
            
                <a href="../effects/">
            
                    
                    Commandes et Souscriptions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../effects/http.html">
            
                <a href="../effects/http.html">
            
                    
                    HTTP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../effects/json.html">
            
                <a href="../effects/json.html">
            
                    
                    JSON
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../effects/random.html">
            
                <a href="../effects/random.html">
            
                    
                    Random
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../effects/time.html">
            
                <a href="../effects/time.html">
            
                    
                    Time
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../install/">
            
                <a href="../install/">
            
                    
                    Installation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../install/editor.html">
            
                <a href="../install/editor.html">
            
                    
                    Éditeur de code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../install/elm.html">
            
                <a href="../install/elm.html">
            
                    
                    Elm
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../interop/">
            
                <a href="../interop/">
            
                    
                    Interopérabilité avec JavaScript
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../interop/flags.html">
            
                <a href="../interop/flags.html">
            
                    
                    Flags
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../interop/ports.html">
            
                <a href="../interop/ports.html">
            
                    
                    Ports
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../interop/custom_elements.html">
            
                <a href="../interop/custom_elements.html">
            
                    
                    Custom Elements
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../interop/limits.html">
            
                <a href="../interop/limits.html">
            
                    
                    Limites
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../webapps/">
            
                <a href="../webapps/">
            
                    
                    Web Apps
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../webapps/navigation.html">
            
                <a href="../webapps/navigation.html">
            
                    
                    Navigation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../webapps/url_parsing.html">
            
                <a href="../webapps/url_parsing.html">
            
                    
                    URL Parsing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../webapps/modules.html">
            
                <a href="../webapps/modules.html">
            
                    
                    Modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../webapps/structure.html">
            
                <a href="../webapps/structure.html">
            
                    
                    Structure
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../optimization/">
            
                <a href="../optimization/">
            
                    
                    Optimisation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../optimization/lazy.html">
            
                <a href="../optimization/lazy.html">
            
                    
                    Html.lazy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../optimization/keyed.html">
            
                <a href="../optimization/keyed.html">
            
                    
                    Html.keyed
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../optimization/asset_size.html">
            
                <a href="../optimization/asset_size.html">
            
                    
                    Minification
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../next_steps.html">
            
                <a href="../next_steps.html">
            
                    
                    Prochaines étapes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" >
            
                <span>
            
                    
                    Annexes
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../appendix/types_as_sets.html">
            
                <a href="../appendix/types_as_sets.html">
            
                    
                    Les types sous forme d'ensembles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../appendix/types_as_bits.html">
            
                <a href="../appendix/types_as_bits.html">
            
                    
                    Les types sous forme de bits
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../appendix/function_types.html">
            
                <a href="../appendix/function_types.html">
            
                    
                    Types de fonctions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Published with HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Custom Types</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <blockquote>
<p><strong>Note:</strong> Custom types used to be referred to as “union types” in Elm. Names from other communities include <a href="https://en.wikipedia.org/wiki/Tagged_union" target="_blank">tagged unions</a> and <a href="https://en.wikipedia.org/wiki/Algebraic_data_type" target="_blank">ADTs</a>.</p>
</blockquote>
<h1 id="custom-types">Custom Types</h1>
<p>So far we have seen a bunch of types like <code>Bool</code>, <code>Int</code>, and <code>String</code>. But how do we define our own?</p>
<p>Say we are making a chat room. Everyone needs a name, but maybe some users do not have a permanent account. They just give a name each time they show up.</p>
<p>We can describe this situation by defining a <code>UserStatus</code> type, listing all the possible variations:</p>
<pre><code class="lang-elm"><span class="hljs-keyword">type</span> <span class="hljs-type">UserStatus</span> = <span class="hljs-type">Regular</span> | <span class="hljs-type">Visitor</span>
</code></pre>
<p>The <code>UserStatus</code> type has two <strong>variants</strong>. Someone can be a <code>Regular</code> or a <code>Visitor</code>. So we could represent a user as a record like this:</p>
<pre><code class="lang-elm"><span class="hljs-keyword">type</span> <span class="hljs-type">UserStatus</span>
  = <span class="hljs-type">Regular</span>
  | <span class="hljs-type">Visitor</span>

<span class="hljs-keyword">type</span> <span class="hljs-keyword">alias</span> <span class="hljs-type">User</span> =
  { status : <span class="hljs-type">UserStatus</span>
  , name : <span class="hljs-type">String</span>
  }

<span class="hljs-title">thomas</span> = { status = <span class="hljs-type">Regular</span>, name = <span class="hljs-string">&quot;Thomas&quot;</span> }
<span class="hljs-title">kate95</span> = { status = <span class="hljs-type">Visitor</span>, name = <span class="hljs-string">&quot;kate95&quot;</span> }
</code></pre>
<p>So now we can track if someone is a <code>Regular</code> with an account or a <code>Visitor</code> who is just passing through. It is not too tough, but we can make it simpler!</p>
<p>Rather than creating a custom type and a type alias, we can represent all this with just a single custom type. The <code>Regular</code> and <code>Visitor</code> variants each have an associated data. In our case, the associated data is a <code>String</code> value:</p>
<pre><code class="lang-elm"><span class="hljs-keyword">type</span> <span class="hljs-type">User</span>
  = <span class="hljs-type">Regular</span> <span class="hljs-type">String</span>
  | <span class="hljs-type">Visitor</span> <span class="hljs-type">String</span>

<span class="hljs-title">thomas</span> = <span class="hljs-type">Regular</span> <span class="hljs-string">&quot;Thomas&quot;</span>
<span class="hljs-title">kate95</span> = <span class="hljs-type">Visitor</span> <span class="hljs-string">&quot;kate95&quot;</span>
</code></pre>
<p>The data is attached directly to the variant, so there is no need for the record anymore.</p>
<p>Another benefit of this approach is that each variant can have different associated data. Say that <code>Regular</code> users gave their age when they signed up. There is no nice way to capture that with records, but when you define your own custom type it is no problem. Let&apos;s add some associated data to the <code>Regular</code> variant in an interactive example:</p>
<p><div class="elm-repl show-types">
[
  {
    &quot;add-type&quot;: &quot;User&quot;,
    &quot;input&quot;: &quot;type User\n  = Regular String Int\n  | Visitor String\n&quot;
  },
  {
    &quot;input&quot;: &quot;Regular&quot;,
    &quot;value&quot;: &quot;\u001b[36m&lt;function&gt;\u001b[0m&quot;,
    &quot;type_&quot;: &quot;String -&gt; Int -&gt; User&quot;
  },
  {
    &quot;input&quot;: &quot;Visitor&quot;,
    &quot;value&quot;: &quot;\u001b[36m&lt;function&gt;\u001b[0m&quot;,
    &quot;type_&quot;: &quot;String -&gt; User&quot;
  },
  {
    &quot;input&quot;: &quot;Regular \&quot;Thomas\&quot; 44&quot;,
    &quot;value&quot;: &quot;\u001b[96mRegular\u001b[0m \u001b[93m\&quot;Thomas\&quot;\u001b[0m \u001b[95m44\u001b[0m&quot;,
    &quot;type_&quot;: &quot;User&quot;
  },
  {
    &quot;input&quot;: &quot;Visitor \&quot;kate95\&quot;&quot;,
    &quot;value&quot;: &quot;\u001b[96mVisitor\u001b[0m \u001b[93m\&quot;kate95\&quot;\u001b[0m&quot;,
    &quot;type_&quot;: &quot;User&quot;
  }
]
</div></p>
<p>Try defining a <code>Regular</code> visitor with a name and age ⬆️</p>
<p>We only added an age, but variants of a type can diverge quite dramatically. For example, maybe we want to add location for <code>Regular</code> users so we can suggest regional chat rooms. Add more associated data! Or maybe we want to have anonymous users. Add a third variant called <code>Anonymous</code>. Maybe we end up with:</p>
<pre><code class="lang-elm"><span class="hljs-keyword">type</span> <span class="hljs-type">User</span>
  = <span class="hljs-type">Regular</span> <span class="hljs-type">String</span> <span class="hljs-type">Int</span> <span class="hljs-type">Location</span>
  | <span class="hljs-type">Visitor</span> <span class="hljs-type">String</span>
  | <span class="hljs-type">Anonymous</span>
</code></pre>
<p>No problem! Let’s see some other examples now.</p>
<h2 id="messages">Messages</h2>
<p>In the architecture section, we saw a couple of examples of defining a <code>Msg</code> type. This sort of type is extremely common in Elm. In our chat room, we might define a <code>Msg</code> type like this:</p>
<pre><code class="lang-elm"><span class="hljs-keyword">type</span> <span class="hljs-type">Msg</span>
  = <span class="hljs-type">PressedEnter</span>
  | <span class="hljs-type">ChangedDraft</span> <span class="hljs-type">String</span>
  | <span class="hljs-type">ReceivedMessage</span> { user : <span class="hljs-type">User</span>, message : <span class="hljs-type">String</span> }
  | <span class="hljs-type">ClickedExit</span>
</code></pre>
<p>We have four variants. Some variants have no associated data, others have a bunch. Notice that <code>ReceivedMessage</code> actually has a record as associated data. That is totally fine. Any type can be associated data! This allows you to describe interactions in your application very precisely.</p>
<h2 id="modeling">Modeling</h2>
<p>Custom types become extremely powerful when you start modeling situations very precisely. For example, if you are waiting for some data to load, you might want to model it with a custom type like this:</p>
<pre><code class="lang-elm"><span class="hljs-keyword">type</span> <span class="hljs-type">Profile</span>
  = <span class="hljs-type">Failure</span>
  | <span class="hljs-type">Loading</span>
  | <span class="hljs-type">Success</span> { name : <span class="hljs-type">String</span>, description : <span class="hljs-type">String</span> }
</code></pre>
<p>So you can start in the <code>Loading</code> state and then transition to <code>Failure</code> or <code>Success</code> depending on what happens. This makes it really simple to write a <code>view</code> function that always shows something reasonable when data is loading.</p>
<p>Now we know how to create custom types, the next section will show how to use them!</p>
<blockquote>
<p><strong>Note: Custom types are the most important feature in Elm.</strong> They have a lot of depth, especially once you get in the habit of trying to model scenarios more precisely. I tried to share some of this depth in <a href="../appendix/types_as_sets.html">Types as Sets</a> and <a href="../appendix/types_as_bits.html">Types as Bits</a> in the appendix. I hope you find them helpful!</p>
</blockquote>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="type_aliases.html" class="navigation navigation-prev " aria-label="Previous page: Type Aliases">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="pattern_matching.html" class="navigation navigation-next " aria-label="Next page: Pattern Matching">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Custom Types","level":"1.4.3","depth":2,"next":{"title":"Pattern Matching","level":"1.4.4","depth":2,"path":"types/pattern_matching.md","ref":"types/pattern_matching.md","articles":[]},"previous":{"title":"Type Aliases","level":"1.4.2","depth":2,"path":"types/type_aliases.md","ref":"types/type_aliases.md","articles":[]},"dir":"ltr"},"config":{"plugins":["elm-repl","bulk-redirect","-sharing"],"root":"book","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"bulk-redirect":{"basepath":"/","redirectsFile":"redirects.json"},"elm-repl":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"Evan Czaplicki","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"An Introduction to Elm","gitbook":"*","description":"Learn the basics of Elm. Build applications. Learn functional programming."},"file":{"path":"types/custom_types.md","mtime":"2022-03-10T16:18:43.038Z","type":"markdown"},"gitbook":{"version":"3.7.1","time":"2022-03-26T11:12:17.457Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-elm-repl/repl.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

