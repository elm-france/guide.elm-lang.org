
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <title>Modules · An Introduction to Elm</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 3.7.1">
        <meta name="author" content="Evan Czaplicki">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="structure.html" />
    
    
    <link rel="prev" href="url_parsing.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../bases_du_langage.html">
            
                <a href="../bases_du_langage.html">
            
                    
                    Bases du langage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../architecture/">
            
                <a href="../architecture/">
            
                    
                    L'Architecture Elm
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../architecture/buttons.html">
            
                <a href="../architecture/buttons.html">
            
                    
                    Buttons
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../architecture/text_fields.html">
            
                <a href="../architecture/text_fields.html">
            
                    
                    Text Fields
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../architecture/forms.html">
            
                <a href="../architecture/forms.html">
            
                    
                    Forms
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../types/">
            
                <a href="../types/">
            
                    
                    Les types
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../types/reading_types.html">
            
                <a href="../types/reading_types.html">
            
                    
                    Lire les types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../types/type_aliases.html">
            
                <a href="../types/type_aliases.html">
            
                    
                    Type Aliases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../types/custom_types.html">
            
                <a href="../types/custom_types.html">
            
                    
                    Custom Types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../types/pattern_matching.html">
            
                <a href="../types/pattern_matching.html">
            
                    
                    Pattern Matching
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../error_handling/">
            
                <a href="../error_handling/">
            
                    
                    Gestion d'erreur
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../error_handling/maybe.html">
            
                <a href="../error_handling/maybe.html">
            
                    
                    Maybe
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../error_handling/result.html">
            
                <a href="../error_handling/result.html">
            
                    
                    Result
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../effects/">
            
                <a href="../effects/">
            
                    
                    Commandes et Souscriptions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../effects/http.html">
            
                <a href="../effects/http.html">
            
                    
                    HTTP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../effects/json.html">
            
                <a href="../effects/json.html">
            
                    
                    JSON
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../effects/random.html">
            
                <a href="../effects/random.html">
            
                    
                    Random
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../effects/time.html">
            
                <a href="../effects/time.html">
            
                    
                    Time
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../install/">
            
                <a href="../install/">
            
                    
                    Installation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../install/editor.html">
            
                <a href="../install/editor.html">
            
                    
                    Éditeur de code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../install/elm.html">
            
                <a href="../install/elm.html">
            
                    
                    Elm
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../interop/">
            
                <a href="../interop/">
            
                    
                    Interopérabilité avec JavaScript
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../interop/flags.html">
            
                <a href="../interop/flags.html">
            
                    
                    Flags
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../interop/ports.html">
            
                <a href="../interop/ports.html">
            
                    
                    Ports
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../interop/custom_elements.html">
            
                <a href="../interop/custom_elements.html">
            
                    
                    Custom Elements
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../interop/limits.html">
            
                <a href="../interop/limits.html">
            
                    
                    Limites
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="./">
            
                <a href="./">
            
                    
                    Web Apps
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="navigation.html">
            
                <a href="navigation.html">
            
                    
                    Navigation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="url_parsing.html">
            
                <a href="url_parsing.html">
            
                    
                    URL Parsing
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.9.3" data-path="modules.html">
            
                <a href="modules.html">
            
                    
                    Modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="structure.html">
            
                <a href="structure.html">
            
                    
                    Structure
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../optimization/">
            
                <a href="../optimization/">
            
                    
                    Optimisation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../optimization/lazy.html">
            
                <a href="../optimization/lazy.html">
            
                    
                    Html.lazy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../optimization/keyed.html">
            
                <a href="../optimization/keyed.html">
            
                    
                    Html.keyed
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../optimization/asset_size.html">
            
                <a href="../optimization/asset_size.html">
            
                    
                    Minification
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../next_steps.html">
            
                <a href="../next_steps.html">
            
                    
                    Prochaines étapes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" >
            
                <span>
            
                    
                    Annexes
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../appendix/types_as_sets.html">
            
                <a href="../appendix/types_as_sets.html">
            
                    
                    Les types sous forme d'ensembles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../appendix/types_as_bits.html">
            
                <a href="../appendix/types_as_bits.html">
            
                    
                    Les types sous forme de bits
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../appendix/function_types.html">
            
                <a href="../appendix/function_types.html">
            
                    
                    Types de fonctions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Published with HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Modules</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="modules">Modules</h1>
<p>Elm has <strong>modules</strong> to help you grow your codebase in a nice way. On the most basic level, modules let you break your code into multiple files.</p>
<h2 id="defining-modules">Defining Modules</h2>
<p>Elm modules work best when you define them around a central type. Like how the <code>List</code> module is all about the <code>List</code> type. So say we want to build a module around a <code>Post</code> type for a blogging website. We can create something like this:</p>
<pre><code class="lang-elm"><span class="hljs-keyword">module</span> Post <span class="hljs-keyword">exposing</span> (<span class="hljs-type">Post</span>, estimatedReadTime, encode, decoder)

<span class="hljs-keyword">import</span> Json.Decode <span class="hljs-keyword">as</span> D
<span class="hljs-keyword">import</span> Json.Encode <span class="hljs-keyword">as</span> E


<span class="hljs-comment">-- POST</span>

<span class="hljs-keyword">type</span> <span class="hljs-keyword">alias</span> <span class="hljs-type">Post</span> =
  { title : <span class="hljs-type">String</span>
  , author : <span class="hljs-type">String</span>
  , content : <span class="hljs-type">String</span>
  }


<span class="hljs-comment">-- READ TIME</span>

<span class="hljs-title">estimatedReadTime</span> : <span class="hljs-type">Post</span> -&gt; <span class="hljs-type">Float</span>
<span class="hljs-title">estimatedReadTime</span> post =
  toFloat (wordCount post) / <span class="hljs-number">220</span>

<span class="hljs-title">wordCount</span> : <span class="hljs-type">Post</span> -&gt; <span class="hljs-type">Int</span>
<span class="hljs-title">wordCount</span> post =
  <span class="hljs-type">List</span>.length (<span class="hljs-type">String</span>.words post.content)


<span class="hljs-comment">-- JSON</span>

<span class="hljs-title">encode</span> : <span class="hljs-type">Post</span> -&gt; <span class="hljs-type">E</span>.<span class="hljs-type">Value</span>
<span class="hljs-title">encode</span> post =
  <span class="hljs-type">E</span>.object
    [ (<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-type">E</span>.string post.title)
    , (<span class="hljs-string">&quot;author&quot;</span>, <span class="hljs-type">E</span>.string post.author)
    , (<span class="hljs-string">&quot;content&quot;</span>, <span class="hljs-type">E</span>.string post.content)
    ]

<span class="hljs-title">decoder</span> : <span class="hljs-type">D</span>.<span class="hljs-type">Decoder</span> <span class="hljs-type">Post</span>
<span class="hljs-title">decoder</span> =
  <span class="hljs-type">D</span>.map3 <span class="hljs-type">Post</span>
    (<span class="hljs-type">D</span>.field <span class="hljs-string">&quot;title&quot;</span> <span class="hljs-type">D</span>.string)
    (<span class="hljs-type">D</span>.field <span class="hljs-string">&quot;author&quot;</span> <span class="hljs-type">D</span>.string)
    (<span class="hljs-type">D</span>.field <span class="hljs-string">&quot;content&quot;</span> <span class="hljs-type">D</span>.string)
</code></pre>
<p>The only new syntax here is that <code>module Post exposing (..)</code> line at the very top. That means the module is known as <code>Post</code> and only certain values are available to outsiders. As written, the <code>wordCount</code> function is only available <em>within</em> the <code>Post</code> module. Hiding functions like this is one of the most important techniques in Elm!</p>
<blockquote>
<p><strong>Note:</strong> If you forget to add a module declaration, Elm will use this one instead:</p>
<pre><code class="lang-elm"><span class="hljs-keyword">module</span> Main <span class="hljs-keyword">exposing</span> (..)
</code></pre>
<p>This makes things easier for beginners working in just one file. They should not be confronted with the module system on their first day!</p>
</blockquote>
<h2 id="growing-modules">Growing Modules</h2>
<p>As your application gets more complex, you will end up adding things to your modules. It is normal for Elm modules to be in the 400 to 1000 line range, as I explain in <a href="https://youtu.be/XpDsk374LDE" target="_blank">The Life of a File</a>. But when you have multiple modules, how do you decide <em>where</em> to add new code?</p>
<p>I try to use the following heuristics when code is:</p>
<ul>
<li><strong>Unique</strong> — If logic only appears in one place, I break out top-level helper functions as close to the usage as possible. Maybe use a comment header like <code>-- POST PREVIEW</code> to indicate that the following definitions are related to previewing posts.</li>
<li><strong>Similar</strong> — Say we want to show <code>Post</code> previews on the home page and on the author pages. On the home page, we want to emphasize the interesting content, so we want longer snippets. But on the author page, we want to emphasize the breadth of content, so we want to focus on titles. These cases are <em>similar</em>, not the same, so we go back to the <strong>unique</strong> heuristic. Just write the logic separately.</li>
<li><strong>The Same</strong> — At some point we will have a bunch of <strong>unique</strong> code. That is fine! But perhaps we find that some definitions contain logic that is <em>exactly</em> the same. Break out a helper function for that logic! If all the uses are in one module, no need to do anything more. Maybe put a comment header like <code>-- READ TIME</code> if you really want.</li>
</ul>
<p>These heuristics are all about making helper functions within a single file. You only want to create a new module when a bunch of these helper functions all center around a specific custom type. For example, you start by creating a <code>Page.Author</code> module, and do not create a <code>Post</code> module until the helper functions start piling up. At that point, creating a new module should make your code feel easier to navigate and understand. If it does not, go back to the version that was clearer. More modules is not more better! Take the path that keeps the code simple and clear.</p>
<p>To summarize, assume <strong>similar</strong> code is <strong>unique</strong> by default. (It usually is in user interfaces in the end!) If you see logic that is <strong>the same</strong> in different definitions, make some helper functions with appropriate comment headers. When you have a bunch of helper functions about a specific type, <em>consider</em> making a new module. If a new module makes your code clearer, great! If not, go back. More files is not inherently simpler or clearer.</p>
<blockquote>
<p><strong>Note:</strong> One of the most common ways to get tripped up with modules is when something that was once <strong>the same</strong> becomes <strong>similar</strong> later on. Very common, especially in user interfaces! Folks will often try to create a Frankenstein function that handles all the different cases. Adding more arguments. Adding more <em>complex</em> arguments. The better path is to accept that you now have two <strong>unique</strong> situations and copy the code into both places. Customize it exactly how you need. Then see if any of the resulting logic is <strong>the same</strong>. If so, move it out into helpers. <strong>Your long functions should split into multiple smaller functions, not grow longer and more complex!</strong></p>
</blockquote>
<h2 id="using-modules">Using Modules</h2>
<p>It is customary in Elm for all of your code to live in the <code>src/</code> directory. That is the default for <a href="https://github.com/elm/compiler/blob/0.19.0/docs/elm.json/application.md" target="_blank"><code>elm.json</code></a> even. So our <code>Post</code> module would need to live in a file named <code>src/Post.elm</code>. From there, we can <code>import</code> a module and use its exposed values. There are four ways to do that:</p>
<pre><code class="lang-elm"><span class="hljs-keyword">import</span> Post
<span class="hljs-comment">-- Post.Post, Post.estimatedReadTime, Post.encode, Post.decoder</span>

<span class="hljs-keyword">import</span> Post <span class="hljs-keyword">as</span> P
<span class="hljs-comment">-- P.Post, P.estimatedReadTime, P.encode, P.decoder</span>

<span class="hljs-keyword">import</span> Post <span class="hljs-keyword">exposing</span> (<span class="hljs-type">Post</span>, estimatedReadTime)
<span class="hljs-comment">-- Post, estimatedReadTime</span>
<span class="hljs-comment">-- Post.Post, Post.estimatedReadTime, Post.encode, Post.decoder</span>

<span class="hljs-keyword">import</span> Post <span class="hljs-keyword">as</span> P <span class="hljs-keyword">exposing</span> (<span class="hljs-type">Post</span>, estimatedReadTime)
<span class="hljs-comment">-- Post, estimatedReadTime</span>
<span class="hljs-comment">-- P.Post, P.estimatedReadTime, P.encode, P.decoder</span>
</code></pre>
<p>I recommend using <code>exposing</code> pretty rarely. Ideally on zero or one of your imports. Otherwise, it can start getting hard to figure out where things came from when reading though. “Wait, where is <code>filterPostBy</code> from again? What arguments does it take?” It gets harder and harder to read through code as you add more <code>exposing</code>. I tend to use it for <code>import Html exposing (..)</code> but not on anything else. For everything else, I recommend using the standard <code>import</code> and maybe using <code>as</code> if you have a particularly long module name!</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="url_parsing.html" class="navigation navigation-prev " aria-label="Previous page: URL Parsing">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="structure.html" class="navigation navigation-next " aria-label="Next page: Structure">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Modules","level":"1.9.3","depth":2,"next":{"title":"Structure","level":"1.9.4","depth":2,"path":"webapps/structure.md","ref":"webapps/structure.md","articles":[]},"previous":{"title":"URL Parsing","level":"1.9.2","depth":2,"path":"webapps/url_parsing.md","ref":"webapps/url_parsing.md","articles":[]},"dir":"ltr"},"config":{"plugins":["elm-repl","bulk-redirect","-sharing"],"root":"book","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"bulk-redirect":{"basepath":"/","redirectsFile":"redirects.json"},"elm-repl":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"Evan Czaplicki","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"An Introduction to Elm","gitbook":"*","description":"Learn the basics of Elm. Build applications. Learn functional programming."},"file":{"path":"webapps/modules.md","mtime":"2022-03-10T16:18:43.039Z","type":"markdown"},"gitbook":{"version":"3.7.1","time":"2022-03-26T11:02:33.493Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-elm-repl/repl.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

